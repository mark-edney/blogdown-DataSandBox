---
title: 'Speed cameras in Toronto'
author: Mark Edney
date: '2022-02-16'
slug: []
categories:
  - Project
tags:
  - R
  - Leaflet
draft: no
description: ''
image: 'img/toronto_traffic.jpg'
archives:
  - 2022/02

---

<script src="{{< blogdown/postref >}}index.en_files/header-attrs/header-attrs.js"></script>


<blockquote>
<p>Photo by <a href="https://unsplash.com/@sepidehgolchin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Sepideh Golchin Rad</a> on <a href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText">Unsplash</a></p>
</blockquote>
<blockquote>
<p>This project was originally written on 02/01/2021 as part of the Data Products
course for the Data Science Specialization from Johns Hopkins University on Coursera</p>
</blockquote>
<div id="objective" class="section level2">
<h2>Objective</h2>
<p>This report plots the speed cameras in the Greater Toronto Area from the data provided
by Open Toronto which can be found <a href="https://open.toronto.ca/dataset/automated-speed-enforcement-locations/">here</a>.</p>
</div>
<div id="inialization" class="section level2">
<h2>Inialization</h2>
<p>The following code is used to initialize the required libraries.</p>
<pre class="r"><code>install.packages(&quot;opendatatoronto&quot;, repos = &quot;http://cran.us.r-project.org&quot;, dependencies = TRUE)</code></pre>
<pre><code>## package &#39;opendatatoronto&#39; successfully unpacked and MD5 sums checked
## 
## The downloaded binary packages are in
##  C:\Users\Mark\AppData\Local\Temp\RtmpoJwKap\downloaded_packages</code></pre>
<pre class="r"><code>library(opendatatoronto)
library(dplyr)
library(leaflet)</code></pre>
<p>The following code is provided by the Open Toronto site to download the dataset.</p>
<pre class="r"><code># get package
package &lt;- show_package(&quot;a154790c-4a8a-4d09-ab6b-535ddb646770&quot;)

# get all resources for this package
resources &lt;- list_package_resources(&quot;a154790c-4a8a-4d09-ab6b-535ddb646770&quot;)

# identify datastore resources; by default, Toronto Open Data sets datastore resource format to CSV for non-geospatial and GeoJSON for geospatial resources
datastore_resources &lt;- filter(resources, tolower(format) %in% c(&#39;csv&#39;, &#39;geojson&#39;))

# load the first datastore resource as a sample
data &lt;- filter(datastore_resources, row_number()==1) %&gt;% get_resource()</code></pre>
</div>
<div id="plotting-the-data" class="section level2">
<h2>Plotting the Data</h2>
<p>The geometry in the dataset can be used directly with leaflet and the longitude and
latitude do not need to be separated.</p>
<pre class="r"><code>df &lt;- data$geometry</code></pre>
<p>Custom icons for the speed cameras can be used with the following code:</p>
<pre class="r"><code>cameraicon &lt;- makeIcon(
        iconUrl = &quot;https://www.flaticon.com/svg/static/icons/svg/2164/2164608.svg&quot;,
        iconWidth = 35, iconHeight = 35
)</code></pre>
<p>Finally all the data and options can be passed to the leaflet function.</p>
<pre class="r"><code>plt &lt;- df %&gt;%
        leaflet() %&gt;%
        addTiles() %&gt;%
        addMarkers(icon = cameraicon, clusterOptions = markerClusterOptions(), popup = data$location)</code></pre>
<div id="htmlwidget-1" class="leaflet html-widget" style="width:100%;height:400px;">

</div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addTiles","args":["//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",null,null,{"minZoom":0,"maxZoom":18,"tileSize":256,"subdomains":"abc","errorTileUrl":"","tms":false,"noWrap":false,"zoomOffset":0,"zoomReverse":false,"opacity":1,"zIndex":1,"detectRetina":false,"attribution":"&copy; <a href=\"http://openstreetmap.org\">OpenStreetMap<\/a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA<\/a>"}]},{"method":"addMarkers","args":[[43.721092,43.738316,43.684686,43.650985,43.600467,43.635061,43.663813,43.651459,43.703265,43.702058,43.741206,43.751653,43.74218,43.751013,43.716315,43.720427,43.679207,43.678625,43.636104,43.646066,43.674231,43.654858,43.693662,43.691502,43.65621,43.669437,43.689517,43.685962,43.728136,43.754147,43.749876,43.755113,43.781617,43.78279,43.771045,43.790911,43.716203,43.694671,43.716422,43.724116,43.757184,43.755324,43.803327,43.788597,43.815932,43.79808,43.76879,43.770597,43.769012,43.804738,43.734476,43.682991,43.684999,43.640695,43.633225,43.615495,43.64253,43.655081,43.670715,43.711518,43.764017,43.75096,43.739993,43.74265,43.711893,43.719926,43.683325,43.656124,43.650557,43.645661,43.665554,43.661677,43.679447,43.690725,43.6629,43.657748,43.697391,43.693481,43.75107,43.72947,43.73556,43.739579,43.800338,43.808397,43.784425,43.771093,43.704869,43.67979,43.697953,43.725593,43.740433,43.771386,43.787727,43.786773,43.808227,43.829693,43.774337,43.760182,43.806237,43.820617],[-79.571337,-79.595815,-79.56139,-79.522707,-79.519132,-79.506245,-79.488845,-79.485329,-79.501502,-79.520012,-79.502757,-79.451329,-79.513888,-79.514669,-79.43208,-79.415062,-79.443567,-79.435508,-79.397689,-79.418101,-79.392113,-79.394266,-79.422577,-79.433017,-79.361694,-79.37682,-79.341014,-79.351208,-79.384666,-79.37075,-79.354894,-79.321751,-79.325995,-79.332558,-79.42789,-79.433572,-79.304936,-79.325581,-79.24225,-79.231438,-79.288809,-79.308006,-79.319553,-79.281572,-79.229572,-79.243791,-79.23978,-79.235848,-79.175677,-79.212114,-79.59055,-79.568876,-79.527765,-79.58549,-79.555593,-79.507852,-79.45528,-79.477902,-79.502786,-79.51697,-79.465845,-79.491983,-79.539617,-79.509951,-79.454245,-79.45838,-79.46086,-79.433906,-79.401657,-79.397891,-79.40321,-79.415117,-79.436545,-79.408331,-79.374423,-79.361327,-79.331149,-79.331208,-79.372501,-79.366913,-79.340394,-79.346563,-79.349958,-79.358381,-79.394383,-79.424087,-79.316731,-79.29461,-79.261283,-79.263597,-79.303522,-79.284654,-79.322803,-79.303947,-79.270768,-79.231921,-79.18848,-79.193916,-79.2134,-79.208256],{"iconUrl":{"data":"https://www.flaticon.com/svg/static/icons/svg/2164/2164608.svg","index":0},"iconWidth":35,"iconHeight":35},null,null,{"interactive":true,"draggable":false,"keyboard":true,"title":"","alt":"","zIndexOffset":0,"opacity":1,"riseOnHover":false,"riseOffset":250},["Kipling Ave. South of Snaresbrook Dr.","Silverstone Dr. North of Avening Dr.","The Westway West of Brampton Rd.","Montgomery Rd. Near Loyalist Rd.","Birmingham St. West of Kipling Ave.","Royal York Rd. North of Coney Rd.","Priscilla Ave. South of Dundas St. W.","Jane St. South of Weatherell St.","Lawrence Ave. W. East of Martini Dr.","King St. South of George St","Sheppard Ave. W. East of Buckland Rd.","Faywood Blvd. Near Norcross Rd.","Jane St. North of Clair Rd.","Yorkwoods Gate. East of Jane St.","Glenmount Ave. Near Madoc Dr.","Avenue Rd. South of Caribou Rd.","Dufferin St. North of Norton Ave.","Oakwood Ave. Near Biggar Ave.","Queens Quay East of Bathurst St.","Givins St. South of Argyle St.","Davenport Rd. Near Bishop St.","Beverley St. Near D'Arcy St.","Bathurst St. Near Ardmore Rd.","Arlington Ave. South of Durham Ave.","Queen St. E. Near Sackville St.","Isabella St. West of Sherbourne St.","Donlands Ave. Near Memorial Park Ave.","Westwood Ave. West of Carlaw Ave.","Lawrence Ave. E. East of Mildenhall Rd.","Banbury Rd. Near Portsmith Rd.","Scarsdale Rd. South of York Mills Rd.","Wallingford Rd. North of Cassandra Blvd.","Victoria Park Ave. North of Old Sheppard Ave.","Brian Dr.  North of Clydesdale Dr.","Senlac Rd.  South of Horsham Ave.","Cactus Ave.  North of Moore Park Ave.","O'Connor Dr.  Near Wakunda Place.","Cosburn Ave.  West of Binswood Ave.","Kingston Rd. Near 2685 Kingston Rd.","Cathedral Bluffs Dr.  South of Kingston Rd.","Birchmount Rd.  South of Ellendale Dr.","Dewey Dr.  East of Pharmacy Ave.","Warden Ave.  South of Glen Springs Dr.","Lockie Ave.  East of Donalda Cres.","Finch Ave. E.  West of Neilson Rd.","Nugget Ave.  East of Transfer Place.","Bellamy Rd. N.  South of Northleigh Dr.","Brimorton Dr.  Near Amberjack Blvd.","Manse Rd.  Near 292 Manse Rd.","Wickson Trail  West of Brenyon Way","Martin Grove Rd. North of Rampart Rd","Redgrave Dr. West of Martin Grove Rd.","Royal York Rd. North of La Rose Ave.","Mill Rd. North of Burnhamthorpe Rd.","The East Mall South of Faludon Court","Ourland Ave. Near Merriday St","Parkside Dr. South of Algonquin Ave","Runnymede Rd. North of Colbeck St.","Scarlett Rd. South of Ellins Ave.","Gary Dr. Near Deerhurst Ave.","Dufferin St. North of Stanstead Dr.","Stilecroft Dr. West of Sharpecroft Blvd.","Weston Rd. Near Coronado Court","Spenvalley Dr. Near Whitbread Cres.","Dufferin St. South of Claver Ave.","Orfus Rd. West of Dufferin St.","Rogers Rd. Near 382 Rogers Rd.","Dufferin St. South of Dufferin Park Ave.","Denison Ave. South of Grange Ave.","Brant St. South of Adelaide St. W.","Spadina Ave. South of Bloor St. W.","Manning Ave. South of Lennox St.","St. Clair Ave. W. Near Crang Ave.","Warren Rd. North of Lonsdale Rd.","Carlton St. Near Homewood Ave.","Shuter St. East of Sackville St.","O'Connor Dr. West of Lankin Blvd.","Cosburn Ave. Near Roosevelt Rd.","York Mills Rd. West of Banbury Rd.","Park Lane Circle Near 60 Park Lane Circle","The Donway E. North of Greenland Rd","The Donway W. Near Duncairn Rd.","McNicoll Ave. Near Sexton Cres.","Don Mills Rd. South of Freshmeadow Dr.","Finch Ave. E. Near Manorcrest Dr.","Churchill Ave. West of Abbotsford Rd.","St. Clair Ave. E. West of Marilyn Cres.","Kingston Rd. Near Glen Manor Dr.","Danforth Ave. East of Birchmount Rd.","Corvette Ave. Near Cleta Dr.","Pharmacy Ave. North of Sherwood Ave.","Antrim Cres. Near 11 Antrim Cres.","Pharmacy Ave. Near 2300 Pharmacy Ave.","Dunmurray Blvd. Near Groomsport Cres.","Sandhurst Circle North of Finch Ave. E.","Seasons Dr. East of Oasis Blvd.","Morningside Ave. Near Warnsworth St.","Galloway Rd. Near Coronation Dr.","Brenyon Way Near 200 Brenyon Way","Old Finch Ave. West of Littles Rd."],null,{"showCoverageOnHover":true,"zoomToBoundsOnClick":true,"spiderfyOnMaxZoom":true,"removeOutsideVisibleBounds":true,"spiderLegPolylineOptions":{"weight":1.5,"color":"#222","opacity":0.5},"freezeAtZoom":false},null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[43.600467,43.829693],"lng":[-79.595815,-79.175677]}},"evals":[],"jsHooks":[]}</script>
</div>
